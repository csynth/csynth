<!DOCTYPE html>
<html>
    <head>
        <title>Mutator Demos</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            * { box-sizing: border-box; }
            row { display: flex; }
            /* Create two equal columns that sits next to each other */
            column { flex: 33%; padding: 0 2%;}
            ul {margin-top: 0;}
            h3 {margin-bottom: 0.3em;}
        </style>
    </head>
    <body>
        <h1>Mutator group web demos</h1>
        <span style="position:absolute; top:2em; right: 3em">Serving from: <b id="serverdir"></b></span>
        <row>
        <column>

        <p>This launches various Mutator group WebGL and WebXR based demos.
            It does not include non web-based systems such as Vortex and FoldSynth.</p>
            <p>Use <b>alt,leftarrow</b> to return to this menu from any chosen item; or hit <b>F11</b> to see standard browser window.</p>

        <h2>Current 'active' projects</h2>
        These are mainly collected here for convenience in testing.
        <ul style="font-size:125%">
            <li><a href="threek.html?tadkinscript">Kinect script version</a></li>
            <li><a href="threek.html?tadmutnoiseimage">tad+mutate dual system; with noise/image/form</a></li>
            <li><a href="threek.html?imfind">automatic mutation, to find an image</a>
                Mutate the 'standard' object attempting to match an image.
            </li>
            <li><a href="threek.html?tadchina">Kinect version, towards China</a></li>
            <li><a href="threek.html?tadchina&tadnum=?">Kinect version, variable tadpoles, towards China</a></li>
            <li><a href="threek.html?orgbw">pre-mini bw prep in full Organic</a></li>

        </ul>

        <h3><a href="threek.html?standard">Organic horns</a></h3>
		<p>Organic horns as used in William's exhibition.  These do heavy geometry on the graphics card.
		This allows us to generate complex forms in realtime on fairly high end machines,
		but may cause problems on laptops with low end or no dedicated graphics card.</p>
		<p>The shape may be changed using mutation or sliders,
		but changes to the underlying rules require a shader recompile, which takes a second or two.</p>

        <ul>
            <li><a href="threek.html?mutate">standard mutation</a>
                Mutate the 'standard' object.
            </li>
            <li><a href="threek.html?mutate1200">standard mutation, reduce to 1200 horns</a>
                Mutate the 'standard' object.
            </li>
            <li><a href="threek.html?imfind">automatic mutation, to find an image</a>
                Mutate the 'standard' object attempting to match an image.
            </li>
            <li><a href="threek.html?lima">Lima single fullscreen version</a>
                Lima version, mutation with resting piste etc
                <br>Only one mouse button active and other simplificiations from full mutate
            </li>
            <li><a href="threek.html?limaprojector">Lima projector screen version</a>
                The 'full' Lima version covers two screens completely. Launched on standard Chrome/Edge it will not use the full height.
                <br>Not actaully used in Lima in the end.
            </li>
            <li><a href="threek.html?startvr">Organic horns Virtual Reality</a>
                Organic horns as used in VR exhibition.  These do heavy geometry on the graphics card and need VR eqipment.
                In a suitable browser it should enter VR mode automatically.
            </li>

            <li><a href="threek.html">Organic horns simple version</a>
                Organic horns with a simple starter object.
            </li>

        </ul>

        <h3>WebXR and three.js debug samples</h3>
        Not our code; here to help debug some WebXR issues.
        <ul>
            <li><a href="https://threejs.org/examples/?q=webxr#webxr_xr_ballshooter">Three.js VR ballshooter</a></li>
            <li><a href="https://immersive-web.github.io/webxr-samples/immersive-vr-session.html?usePolyfill=0">github immersive webXR tests</a></li>
            <li><a href="https://immersive-web.github.io/webxr-samples/input-tracking.html">github controller webXR tests</a></li>
            <li><a href="https://immersive-web.github.io/webxr-samples/">github webXR multiple tests</a></li>
        </ul>


        <h3>Organic tadpoles</h3>
        <ul>
            <li><a href="threek.html?tadkin">Kinect version</a></li>
            <li><a href="threek.html?tadnoaudio">Kinect version, no audio</a></li>
            <li><a href="threek.html?tadbw">Kinect version, prepare black/white drawings</a></li>
            <li><a href="threek.html?tadcam">Webcam version (w.i.p.)</a></li>
            <li><a href="threek.html?kintadmut">TadKinect+mutate dual system; pending scale fix changes on the Mutate side</a></li>
            <li><a href="threek.html?tadmutnoiseimage">tad+mutate dual system; with noise/image/form</a></li>

            <li><a href="threek.html?tadpomp">Pompidou-like VR version based on current code (broken)</a></li>
            <li><a href=",,/Pomp/threek.html?startobj=tad&startvr">
                Tadpole Pomp version (saved code, Gdrive Pompidou backup extract)
            </a></li>
            <li><a href="http://localhost:8800/gdrive/,,/Pomp/threek.html?startobj=tad&startvr">
                Tadpole Pomp version (saved code, Stephen's gdrive Pompidou backup extract)
            </a></li>
            <li><a href="http://localhost:8800/!d:/temp/organicMutatorPompFri1130/organicart/threek.html?startobj=tad&startvr">
                Tadpole Pomp version (saved code, Stephen's zip/unzip Pompoidou backup)
            </a></li>
            <li><a href="threek.html?tadmanchester">Kinect version, towards Manchester</a></li>


            <li><a href="threek.html?startobj=tad-fubu!tadnum=1200">Leeds dance version (broken)</a>
            </li>

            <!-- <li><a href="threek.html?startobj=tad!exhibitionMode&noaudio">Standard tadpoles</a>
                Audio and several other details not working right now ...
            </li> -->


        </ul>
        </column>
        <column>


        <h3>'mini' version</h3>
        <ul>
            <li><a href="minicode/latestmini.html">minified mini version</a></li>
            <li><a href="minicode/miniorganic.html">debug mini version</a></li>
        </ul>

        <h3>symmetry painter</h3>
        <ul>
            <li><a href="http://localhost:8800/threek.html?sympaint">symmetry painter</a></li>
        </ul>

        <h3>Remote Controls</h3>
        <ul><li><a href="http://localhost:8800/dist/vite/controls.html">Remote control panel</a></li></ul>


        <h3>CSynth various demos</h3>
            <ul>
                <li><a href="csynth.html">Launch CSynth, no data</a></li>
                <li><a href="csynth.html?york">York virus join the RNA (no outer shell)</a></li>
                <li><a href="csynth.html?startscript=CSynth/data/York/S6-S10_interactions_Edges_for_CSynth.js">York virus (broken Guy Fawkes 2022)</a></li>
                <li><a href="csynth.html?crick">Crick</a>Yeast constrained to shell</li>
                <li><a href="csynth.html?startscript=CrickLots/lotsNoConstraints.js">Crick, image shell</a>Crick contrained to microscope shell</li>
                <li><a href="csynth.html?rsse">Royal Society</a></li>
                <li><a href="csynth.html?startscript=C75X1200/loadtiff.js">C75X1200, mouse fit to image</a>Mouse image data compbined with hic for folding</li>
                <li><a href="csynth.html?lorentz">Lorentz experiments</a></li>


                <li><a href="csynth.html?mcgill">McGill experiments (requires data to be available)</a></li>
                <li><a href="csynth.html?newsc2023">Virus: New Scientist Live: 2023</a></li>
                <li><a href="csynth.html?ima">Virus: Institute of Mathematics and its Applications</a></li>
                <li><a href="csynth.html?lowry">Virus: Lowry Gallery</a></li>

                <li><a href="csynth.html?pdb=1emc">Simple PDB iemc</a></li>
                <li><a href="csynth.html?pdb=1cj1">Simple PDB 1cj1</a></li>

            </ul>

        <h3>Simple virus display and symmetry</h3>
        <ul><li>
        <a href=",,/xyz/xyz.html?startdata=data/4bcufullCA.pdb">Simple display of virus and dynamics to demonstrate geometry symmetry.</a>
        </li></ul>

        <h3><a href=",,/xyz/xyz.html?arch">Star Carr</a></h3>
		<p>3d display of Star Car finds and context.</p>
        <ul>
            <li>Extra data files can be loaded from the 'File choice:' dropdown, or by drag/drop from Explorer.</li>
            <li>Display of loaded files can be toggled from the checkboxes in the 'visible:' line.</li>
            <li>Colour and size apply to the last selected set.</li>
        </ul>

        <h3><a href=",,/xyz/xyz.html?startdata=data/mesh.ply">Star Carr 3d flint SLOW</a></h3>
        <p>SLOW TO LOAD ... this shows the 3d display of a flint from ply model, slow to load as it is a large data file
        Just to show ply capability more quickly,
            <a href=",,/xyz/xyz.html?startdata=data/Lucy100k.ply">here is a simpler file</a>.
        </p>

        <h3><a href="http://programbits.co.uk/minster/minstv3.html">Winchester Minster (from UKSC)</a></h3>
        <p>This is not a direct part of the Mutator group work, but is related in various ways</p>

        <h3>Implicit surfaces</h3>
        These implement a surface hunting technique in the graphics card to render implicit functions.
        <ul>
        <li><a href="threek.html?fano">Fano</a>
		The functions used are called Fano functions, with special interest in mathematics.
        </li>
        <li><a href="threek.html?julia">Julia</a>
		The functions used are called Julia functions, with special interest in mathematics.
        </li>
        <li><a href="threek.html?texture">Implicit Texture</a>
		The functions are the functions we usually use for 3d texturing of other forms.
        </li></ul>
        </column>
       <column>

        <h3>working sites</h3>
        Clicking on these takes you to the demo page on various working sites.
        Several of the sites are specific to some machines.
        Note that several of the demos will not work on all the sites.
        <ul>
            <li><a href = "http://localhost:8800/demos.html">Local working</a></li>
            <li><a href = "http://localhost:8800/gdrive/demos.html">Local GDrive</a></li>
            <li><a href = "http://localhost:8800/!c:/gitProjects/csynth/demos.html">Local Git</a></li>
            <li><a href = "https://csynth.github.io/csynth/demos.html">Public site, Github.io</a></li>
            <li><a href = "https://programbits.co.uk/Mutspace/organicart/threek.html">External private Organic, programbits</a></li>
            <li><a href = "http://desktop:8800/demos.html">Local via network</a></li>
            <li><a href = "chrome://inspect/#devices">Chrome remote debug</a>. chrome://inspect/#devices . won't work as link</li>
        </ul>

        <h2>From regression tests</h2>
        <dl id="regr"></dl>

        </column>
        </row>



    <script src="JS/searchString.js"></script>
    <script type="text/javascript">
        var islocalhost = location.hostname === 'localhost' || location.hostname === '127.0.0.1' || location.hostname.startsWith('192.168.1.');
        window.onload = async () => {
            const s = Object.entries(searchReplace).map(x =>`
                <dt><a href="threek.html?${x[0]}">${x[0]}</a></dt>${x[1]}
            `)
            window.regr.innerHTML = s;
            const hr = location.href;
            let xr = ''
            let bcol = '#fff'
            if (!islocalhost)  { bcol = '#fcc'; xr = 'public';}
            else if (hr.includes('/gdrive/')) {bcol = '#ffc'; xr = 'local gdrive' }
            else if (hr.includes('/gitProjects/')) {bcol = '#cff'; xr = 'local git'}
            else {bcol = '#fff'; xr = 'local working'}
            window.serverdir.innerHTML = xr + ': ' + hr;
            document.body.style.backgroundColor = bcol;
        }

        async function nircmd(str) {
            if (islocalhost)
                return await fetch('runcmd.php', {headers: {cmd: `..\\nircmd\\nircmd.exe ${str}`}})
            console.error('cannot use nircmd when not in localhost', location.hostname, str);
        }
        async function runcmd(str) {
            if (islocalhost)
                return await(await fetch('runcmd.php', {headers: {cmd: str}})).text();
            console.error('cannot use runcmd when not in localhost', location.hostname, str);
        }
        async function restorewin() {
            console.log('restorewin was', innerWidth, innerHeight, outerWidth, outerHeight);
            if (outerWidth > 1920)  // this won't be sensible on high res screens
                await nircmd(`win setsize stitle "${document.title}" 0 0 1600, ${1600*1080/1920}`);
            await nircmd(`win settopmost stitle "${document.title}" 0`);
        }

        // keep it sensible after special case such as lima
        // window.addEventListener('focus', () => {console.log('focus'); restorewin()})
        window.addEventListener('load', () => {console.log('load'); restorewin()})
        window.addEventListener('resize', () => {console.log('resize'); restorewin()})

    </script>
    </body>
</html>
